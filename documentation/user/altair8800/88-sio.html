<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>Device 88-sio - User documentation for emuStudio</title> <link rel="shortcut icon" href="/documentation/user/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="/documentation/user/assets/css/just-the-docs-default.css"> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-3492956-5"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-3492956-5', { 'anonymize_ip': true }); </script> <script type="text/javascript" src="/documentation/user/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/documentation/user/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>Device 88-sio | User documentation for emuStudio</title> <meta name="generator" content="Jekyll v4.2.2" /> <meta property="og:title" content="Device 88-sio" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="User documentation for emuStudio 0.40. emuStudio is universal emulation platform and framework targeting mainly academic sphere." /> <meta property="og:description" content="User documentation for emuStudio 0.40. emuStudio is universal emulation platform and framework targeting mainly academic sphere." /> <link rel="canonical" href="/documentation/user/altair8800/88-sio" /> <meta property="og:url" content="/documentation/user/altair8800/88-sio" /> <meta property="og:site_name" content="User documentation for emuStudio" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Device 88-sio" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"User documentation for emuStudio 0.40. emuStudio is universal emulation platform and framework targeting mainly academic sphere.","headline":"Device 88-sio","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"/documentation/user/assets/logo-1.svg"}},"url":"/documentation/user/altair8800/88-sio"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="/documentation/user/" class="site-title lh-tight"> <div class="site-logo"></div> </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/documentation/user/introduction/" class="nav-list-link">Introduction</a><ul class="nav-list "></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/documentation/user/application/" class="nav-list-link">emuStudio Application</a><ul class="nav-list "><li class="nav-list-item "><a href="/documentation/user/application/configuration-file" class="nav-list-link">Configuration file</a></li><li class="nav-list-item "><a href="/documentation/user/application/opening-computer" class="nav-list-link">Opening a computer</a></li><li class="nav-list-item "><a href="/documentation/user/application/computer-schema" class="nav-list-link">Computer schema</a></li><li class="nav-list-item "><a href="/documentation/user/application/main-window" class="nav-list-link">Main window</a></li><li class="nav-list-item "><a href="/documentation/user/application/automation" class="nav-list-link">Automation</a></li><li class="nav-list-item "><a href="/documentation/user/application/logging" class="nav-list-link">Logging</a></li></ul></li><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/documentation/user/altair8800/" class="nav-list-link">MITS Altair8800</a><ul class="nav-list "><li class="nav-list-item "><a href="/documentation/user/altair8800/as-8080" class="nav-list-link">Assembler as-8080</a></li><li class="nav-list-item "><a href="/documentation/user/altair8800/as-z80" class="nav-list-link">Assembler as-z80</a></li><li class="nav-list-item "><a href="/documentation/user/altair8800/8080-cpu" class="nav-list-link">CPU 8080-cpu</a></li><li class="nav-list-item "><a href="/documentation/user/altair8800/z80-cpu" class="nav-list-link">CPU z80-cpu</a></li><li class="nav-list-item "><a href="/documentation/user/altair8800/standard-mem" class="nav-list-link">Memory standard-mem</a></li><li class="nav-list-item "><a href="/documentation/user/altair8800/88-dcdd" class="nav-list-link">Device 88-DCDD</a></li><li class="nav-list-item active"><a href="/documentation/user/altair8800/88-sio" class="nav-list-link active">Device 88-sio</a></li><li class="nav-list-item "><a href="/documentation/user/altair8800/adm3a-terminal" class="nav-list-link">Device adm3a-terminal</a></li><li class="nav-list-item "><a href="/documentation/user/altair8800/simhPseudo-z80" class="nav-list-link">Device simhPseudo-z80</a></li><li class="nav-list-item "><a href="/documentation/user/altair8800/automation" class="nav-list-link">Automation</a></li><li class="nav-list-item "><a href="/documentation/user/altair8800/software" class="nav-list-link">Original software</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/documentation/user/brainduck/" class="nav-list-link">BrainDuck</a><ul class="nav-list "><li class="nav-list-item "><a href="/documentation/user/brainduck/compiler" class="nav-list-link">Compiler "brainc-brainduck"</a></li><li class="nav-list-item "><a href="/documentation/user/brainduck/cpu" class="nav-list-link">CPU "brainduck-cpu"</a></li><li class="nav-list-item "><a href="/documentation/user/brainduck/mem" class="nav-list-link">Memory "brainduck-mem"</a></li><li class="nav-list-item "><a href="/documentation/user/brainduck/terminal" class="nav-list-link">Terminal "brainduck-terminal"</a></li><li class="nav-list-item "><a href="/documentation/user/brainduck/automation" class="nav-list-link">Automation</a></li><li class="nav-list-item "><a href="/documentation/user/brainduck/examples" class="nav-list-link">Example code</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/documentation/user/ram/" class="nav-list-link">RAM</a><ul class="nav-list "><li class="nav-list-item "><a href="/documentation/user/ram/ramc-ram" class="nav-list-link">Compiler "ramc-ram"</a></li><li class="nav-list-item "><a href="/documentation/user/ram/ram-cpu" class="nav-list-link">CPU "ram-cpu"</a></li><li class="nav-list-item "><a href="/documentation/user/ram/ram-mem" class="nav-list-link">Memory "ram-mem"</a></li><li class="nav-list-item "><a href="/documentation/user/ram/abstract-tape" class="nav-list-link">Abstract tape</a></li><li class="nav-list-item "><a href="/documentation/user/ram/automation" class="nav-list-link">Automation</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/documentation/user/rasp/" class="nav-list-link">RASP</a><ul class="nav-list "><li class="nav-list-item "><a href="/documentation/user/rasp/raspc-rasp" class="nav-list-link">Compiler "raspc-rasp"</a></li><li class="nav-list-item "><a href="/documentation/user/rasp/rasp-cpu" class="nav-list-link">CPU "rasp-cpu"</a></li><li class="nav-list-item "><a href="/documentation/user/rasp/rasp-mem" class="nav-list-link">Memory "rasp-mem"</a></li><li class="nav-list-item "><a href="/documentation/user/rasp/automation" class="nav-list-link">Automation</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/documentation/user/ssem/" class="nav-list-link">SSEM</a><ul class="nav-list "><li class="nav-list-item "><a href="/documentation/user/ssem/as-ssem" class="nav-list-link">Assembler "as-ssem"</a></li><li class="nav-list-item "><a href="/documentation/user/ssem/ssem-cpu" class="nav-list-link">CPU "ssem-cpu"</a></li><li class="nav-list-item "><a href="/documentation/user/ssem/ssem-mem" class="nav-list-link">Memory "ssem-mem"</a></li><li class="nav-list-item "><a href="/documentation/user/ssem/ssem-display" class="nav-list-link">Display "ssem-display"</a></li><li class="nav-list-item "><a href="/documentation/user/ssem/automation" class="nav-list-link">Automation</a></li><li class="nav-list-item "><a href="/documentation/user/ssem/software" class="nav-list-link">Software for SSEM</a></li></ul></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search User documentation for emuStudio" aria-label="Search User documentation for emuStudio" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="/" class="site-button" > Back to website </a> </li> </ul> </nav> </div> <div id="main-content-wrap" class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="/documentation/user/altair8800/">MITS Altair8800</a></li> <li class="breadcrumb-nav-list-item"><span>Device 88-sio</span></li> </ol> </nav> <div id="main-content" class="main-content" role="main"> <script type="text/javascript"> gtag('event', 'userdoc', { 'event_category': 'Altair8800', 'event_label': 'Device 88-sio' }); </script> <h1 id="serial-board-88-sio"> <a href="#serial-board-88-sio" class="anchor-heading" aria-labelledby="serial-board-88-sio"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Serial board “88-sio” </h1> <p>Altair 8800 computer was equipped with serial board called <a href="http://www.s100computers.com/Hardware%20Folder/MITS/SIO-B/SIO.htm" target="_blank">88-SIO</a>, or 88-2SIO. It was a device which allowed connecting other devices using RS-232 interface. From one side it was attached to CPU on at least two ports (most commonly <code class="language-plaintext highlighter-rouge">0x10</code> and <code class="language-plaintext highlighter-rouge">0x11</code> for terminal). The other side ended with one physical port allowing to connect one device. A variant called 88-2SIO allowed to connect two devices at the same time.</p> <p>Usually, attached devices were:</p> <ul> <li>serial terminal</li> <li>line printer</li> <li>paper tape reader/punch</li> </ul> <p>The following image shows MITS 88-2SIO board.</p> <p><img src="/documentation/user/assets/altair8800/88-sio-2.png" alt="Serial board MITS 88-SIO-2" /></p> <p>Original manual of MITS 88-SIO serial board can be found <a href="http://maben.homeip.net/static/s100/altair/cards/Altair%2088-SIO%20serial%20IO.pdf" target="_blank">here</a>, <a href="https://usermanual.wiki/Document/MITSAltair88sioSerialIOCardManual.407144693/view" target="_blank">here</a> or <a href="https://deramp.com/downloads/mfe_archive/010-S100%20Computers%20and%20Boards/00-MITS/10-MITS%20S100%20Boards/88-2SIO%20Dual%20Serial%20Board/MITS_Altair_88-2SIO_Searial_Board_Manual_1975.pdf" target="_blank">here</a>.</p> <h2 id="features"> <a href="#features" class="anchor-heading" aria-labelledby="features"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Features </h2> <p>The plugin emulates only basic functionality of the board (e.g. it does not emulate transfer rate). It has the following features:</p> <ul> <li>allows to connect one device</li> <li>CPU ports are configurable</li> <li>supports input/output interrupts</li> <li>has a GUI</li> </ul> <p>GUI can be seen here:</p> <p><img src="/documentation/user/assets/altair8800/88-sio.png" alt="GUI of 88-SIO" /></p> <p>The window shows attached device, control channel and data buffer.</p> <ul> <li><em>1</em>: Attached device name</li> <li><em>2</em>: Control channel status. Control channel is used to retrieve 88-sio status, or enable/disable interrupts. The displayed value shows the status. For details see the 88-sio manual.</li> <li><em>3</em>: 88-sio has internal buffer used for caching one byte coming from the connected device. If the CPU is not fast enough to read it, the data can be overwritten by new data coming from the device. However, the buffer is not used when sending data to the connected device from CPU. Thus writing data from CPU won’t clear data coming from device.</li> <li><em>4</em>: Clear internal data buffer</li> </ul> <h2 id="settings"> <a href="#settings" class="anchor-heading" aria-labelledby="settings"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Settings </h2> <p>88-sio plugin has a separate settings window with three sections, described below.</p> <h3 id="general-settings"> <a href="#general-settings" class="anchor-heading" aria-labelledby="general-settings"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> General settings </h3> <p>The 88-sio plugin support various behaviors of the data transfer, which in reality was the behavior of connected devices and not 88-sio. The reason for supporting these features here is to allow some versatility, regardless of which device is connected. These general settings can be seen in the Settings window:</p> <p><img src="/documentation/user/assets/altair8800/88-sio-settings-1.png" alt="88-SIO CPU ports settings" /></p> <ul> <li><em>1</em>: TTY/ANSI mode. On TTY mode, clears input bit 8 (performs <code class="language-plaintext highlighter-rouge">AND 0x7F</code> on the byte coming from device). On ANSI mode, clears output bit 8 (performs <code class="language-plaintext highlighter-rouge">AND 0x7F</code> on the byte coming from CPU).</li> <li><em>2</em>: Converts input data to upper-case (the byte coming from device).</li> <li><em>3</em>: Maps input/output data Backspace or Delete character to some other character. Possibilities are: Backspace, Delete, Unchanged.</li> </ul> <h3 id="cpu-ports-settings"> <a href="#cpu-ports-settings" class="anchor-heading" aria-labelledby="cpu-ports-settings"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> CPU Ports settings </h3> <p>MITS 88-SIO board in emuStudio is attached to CPU through several ports. In order to support various Altair8800 configurations and thus using wider variety of original software, the device control and data channels are connected to multiple CPU ports. This makes effectively an impression as if there existed multiple 88-sio cards connected to the same device.</p> <p>By default, used CPU port allocation is:</p> <ul> <li>Control channel (or “status port”): <code class="language-plaintext highlighter-rouge">0x10</code>, <code class="language-plaintext highlighter-rouge">0x14</code>, <code class="language-plaintext highlighter-rouge">0x16</code>, <code class="language-plaintext highlighter-rouge">0x18</code> (most commonly used: <code class="language-plaintext highlighter-rouge">0x10</code> for terminal)</li> <li>Data channel (or “data port”): <code class="language-plaintext highlighter-rouge">0x11</code>, <code class="language-plaintext highlighter-rouge">0x15</code>, <code class="language-plaintext highlighter-rouge">0x17</code>, <code class="language-plaintext highlighter-rouge">0x19</code> (most commonly used: <code class="language-plaintext highlighter-rouge">0x11</code> for terminal)</li> </ul> <p>A side note: there existed various additional boards which supported RS-232 communication besides 88-SIO (or 88-2SIO). These boards were compatible with S100 system board, thus they were usable for original Altair8800 computers as well as its clones. For example: <a href="http://www.s100computers.com/Hardware%20Manuals/CompuPro/CompuPro%20System%20Support%201%20Manual.pdf" target="_blank">CompuPro Support Board</a> (status port <code class="language-plaintext highlighter-rouge">0x5C</code>, data port <code class="language-plaintext highlighter-rouge">0x5D</code>), <a href="http://www.s100computers.com/Hardware%20Folder/CompuPro/Interfacer%204/Interfacer%204.htm" target="_blank">CompuPro Interfacer</a> (manual <a href="http://www.s100computers.com/Hardware%20Manuals/CompuPro/CompuPro%20Interface%204%20Manual.pdf" target="_blank">here</a>, consuming 8 CPU ports), <a href="http://www.s100computers.com/Hardware%20Folder/Cromemco/TU-ART/TU-ART.htm" target="_blank">Cromemco TU-ART board</a>, <a href="http://www.s100computers.com/Hardware%20Folder/IMS/4%20Line%20Serial/4%20Line%20(480)%20Serial%20Board.htm" target="_blank">IMS C00480 4-line board</a>, <a href="http://www.s100computers.com/Hardware%20Folder/IMS/IO%20Board/IO%20Board.htm" target="_blank">IMS I/O board</a>, <a href="http://www.s100computers.com/Hardware%20Folder/IMSAI/SIO/SIO.htm" target="_blank">IMSAI SIO Board</a>, <a href="http://www.s100computers.com/Hardware%20Folder/Intersystems/6SIO/6-SIO.htm" target="_blank">Intersystems 6-SIO</a>, etc.</p> <p>But back to 88-sio. The port numbers allocation can be changed in the Settings window:</p> <p><img src="/documentation/user/assets/altair8800/88-sio-settings-2.png" alt="88-SIO CPU ports settings" /></p> <ul> <li><em>1</em>: Attach/detach control channel (“status port”) to/from CPU port</li> <li><em>2</em>: Reset control channel CPU ports to default ones (<code class="language-plaintext highlighter-rouge">0x10</code>, <code class="language-plaintext highlighter-rouge">0x14</code>, <code class="language-plaintext highlighter-rouge">0x16</code>, <code class="language-plaintext highlighter-rouge">0x18</code>)</li> <li><em>3</em>: Attach/detach data channel (“data port”) to/from CPU port</li> <li><em>4</em>: Reset data channel CPU ports to default ones (<code class="language-plaintext highlighter-rouge">0x11</code>, <code class="language-plaintext highlighter-rouge">0x15</code>, <code class="language-plaintext highlighter-rouge">0x17</code>, <code class="language-plaintext highlighter-rouge">0x19</code>)</li> </ul> <h3 id="interrupts-settings"> <a href="#interrupts-settings" class="anchor-heading" aria-labelledby="interrupts-settings"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Interrupts settings </h3> <p>88-sio supports input and output interrupts. If enabled, input interrupt is signalled to CPU when a data becomes available from the connected device. An output interrupt is signalled when data is sent to device. Interrupts support can be generally enabled or disabled, along with interrupt vector configuration in Settings window:</p> <p><img src="/documentation/user/assets/altair8800/88-sio-settings-3.png" alt="88-SIO CPU ports settings" /></p> <ul> <li><em>1</em>: Enable/disable interrupt support and set interrupt vectors. If interrupts are disabled, they cannot be enabled in software (see “Port 1” section below).</li> <li><em>2</em>: Reset to default. Interrupts will be supported and interrupt vector is set to 7 (equivalent to calling <code class="language-plaintext highlighter-rouge">RST 7</code> instruction)</li> </ul> <h2 id="configuration-file"> <a href="#configuration-file" class="anchor-heading" aria-labelledby="configuration-file"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Configuration file </h2> <p>The following table shows all the possible settings of MITS 88-SIO plugin:</p> <div class="table-wrapper"><table> <thead> <tr> <th>Name</th> <th>Default value</th> <th>Valid values</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code class="language-plaintext highlighter-rouge">statusPorts</code></td> <td><code class="language-plaintext highlighter-rouge">"0x10, 0x14, 0x16, 0x18"</code></td> <td>&gt; 0 and &lt; 256; X range from 0 upwards</td> <td>CPU-ports mapped to status port of 88-sio</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">dataPorts</code></td> <td><code class="language-plaintext highlighter-rouge">"0x11, 0x15, 0x17, 0x19"</code></td> <td>&gt; 0 and &lt; 256; X range from 0 upwards</td> <td>CPU-ports mapped to data port of 88-sio</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">clearInputBit8</code></td> <td><code class="language-plaintext highlighter-rouge">false</code></td> <td><code class="language-plaintext highlighter-rouge">true</code>/<code class="language-plaintext highlighter-rouge">false</code></td> <td>Whether to clear 8th bit of the input written to 88-sio</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">clearOutputBit8</code></td> <td><code class="language-plaintext highlighter-rouge">false</code></td> <td><code class="language-plaintext highlighter-rouge">true</code>/<code class="language-plaintext highlighter-rouge">false</code></td> <td>Whether to clear 8th bit of the output, read from 88-sio</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">inputToUpperCase</code></td> <td><code class="language-plaintext highlighter-rouge">false</code></td> <td><code class="language-plaintext highlighter-rouge">true</code>/<code class="language-plaintext highlighter-rouge">false</code></td> <td>Whether to convert the input written to 88-sio into upper-case</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">mapDeleteChar</code></td> <td><code class="language-plaintext highlighter-rouge">"UNCHANGED"</code></td> <td><code class="language-plaintext highlighter-rouge">BACKSPACE</code>, <code class="language-plaintext highlighter-rouge">DELETE</code>, <code class="language-plaintext highlighter-rouge">UNDERSCORE</code>, <code class="language-plaintext highlighter-rouge">UNCHANGED</code></td> <td>Maps a “DEL” input key/character to given value. For example, if user presses “DEL” the 88-sio can map it as if user pressed “BACKSPACE”.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">mapBackspaceChar</code></td> <td><code class="language-plaintext highlighter-rouge">"UNCHANGED"</code></td> <td><code class="language-plaintext highlighter-rouge">BACKSPACE</code>, <code class="language-plaintext highlighter-rouge">DELETE</code>, <code class="language-plaintext highlighter-rouge">UNDERSCORE</code>, <code class="language-plaintext highlighter-rouge">UNCHANGED</code></td> <td>Maps a “BACKSPACE” input key/character to given value. For example, if user presses “BACKSPACE” the 88-sio can map it as if user pressed “DEL”.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">interruptsSupported</code></td> <td><code class="language-plaintext highlighter-rouge">true</code></td> <td><code class="language-plaintext highlighter-rouge">true</code>/<code class="language-plaintext highlighter-rouge">false</code></td> <td>Whether interrupts are supported in general. When disabled, they cannot be enabled in software.</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">inputInterruptVector</code></td> <td><code class="language-plaintext highlighter-rouge">7</code></td> <td>0-7</td> <td>Set input interrupt vector. 88-sio will signal an interrupt to the CPU as RST instruction on the input (e.g. a key press) if input interrupts are enabled</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">outputInterruptVector</code></td> <td><code class="language-plaintext highlighter-rouge">7</code></td> <td>0-7</td> <td>Set output interrupt vector. 88-sio will signal an interrupt to the CPU as RST instruction on the output (e.g. on displaying a char) if output interrupts are enabled</td> </tr> </tbody> </table></div> <h2 id="programming"> <a href="#programming" class="anchor-heading" aria-labelledby="programming"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Programming </h2> <p>In order to show something useful, let’s assume that a terminal LSI ADM-3A is attached to the board. Remember, the board only mediates the communication, it does not interpret any of the sent/received characters.</p> <h3 id="cpu-ports"> <a href="#cpu-ports" class="anchor-heading" aria-labelledby="cpu-ports"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> CPU Ports </h3> <p>Whole communication between the board (and attached device) and CPU is controlled by programming the two ports: Status port and Data port. The following table shows the ports and how they are used.</p> <div class="table-wrapper"><table> <thead> <tr> <th>Channel</th> <th>Address</th> <th>Input</th> <th>Output</th> </tr> </thead> <tbody> <tr> <td>Control (port 1)</td> <td><code class="language-plaintext highlighter-rouge">0x10</code>, <code class="language-plaintext highlighter-rouge">0x14</code>, <code class="language-plaintext highlighter-rouge">0x16</code>, <code class="language-plaintext highlighter-rouge">0x18</code></td> <td>Read board status</td> <td>Used for enabling/disabling input/output interrupts.</td> </tr> <tr> <td>Data (port 2)</td> <td><code class="language-plaintext highlighter-rouge">0x11</code>, <code class="language-plaintext highlighter-rouge">0x15</code>, <code class="language-plaintext highlighter-rouge">0x17</code>, <code class="language-plaintext highlighter-rouge">0x19</code></td> <td>Read data</td> <td>Write data</td> </tr> </tbody> </table></div> <p>Now, detailed description of the ports follow. Bits are ordered in a byte as follows:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>D7 D6 D5 D4 D3 D2 D1 D0
</code></pre></div></div> <p>where <code class="language-plaintext highlighter-rouge">D7</code> is the most significant bit, and <code class="language-plaintext highlighter-rouge">D0</code> the least significant bit.</p> <h3 id="port-1-control-port"> <a href="#port-1-control-port" class="anchor-heading" aria-labelledby="port-1-control-port"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Port 1 (“Control” port) </h3> <p><em>WRITE</em>:</p> <p>Controls input/output interrupts enable.</p> <ul> <li><code class="language-plaintext highlighter-rouge">D7 D6 D5 D4 D3 D2</code> : unused bits</li> <li><code class="language-plaintext highlighter-rouge">D1</code> : Enable/disable <em>output</em> interrupts (0 - disable, 1 - enable)</li> <li><code class="language-plaintext highlighter-rouge">D0</code> : Enable/disable <em>input</em> interrupts (0 - disable, 1 - enable)</li> </ul> <p>Interrupts (both input and output) are signalled to the CPU as <code class="language-plaintext highlighter-rouge">RST</code> instruction with the interrupt vector value used from the 88-SIO plugin settings (by default, <code class="language-plaintext highlighter-rouge">RST 7</code> is signalled).</p> <p>Input interrupt is triggered when a device connected to 88-SIO sends data to it, so CPU will be notified to read it. Output interrupt is triggered when CPU sends data to 88-SIO, which effectively calls CPU again.</p> <p><em>READ</em>:</p> <p>Read status of the device.</p> <ul> <li><code class="language-plaintext highlighter-rouge">D7</code> : <em>Output device ready</em>. Always 0 in the emulator.</li> <li><code class="language-plaintext highlighter-rouge">D6</code> : Not used (always 0).</li> <li><code class="language-plaintext highlighter-rouge">D5</code> : <em>Data available (for writing to the attached device)</em>. Always 0 in the emulator, meaning that no data is pending to be written. Data are written immediately after <code class="language-plaintext highlighter-rouge">OUT</code> instruction.</li> <li><code class="language-plaintext highlighter-rouge">D4</code> : <em>Data overflow</em>. Value 1 means a new word of data has been received before the previous word was inputted to the accumulator. In emuStudio, this never happens.</li> <li><code class="language-plaintext highlighter-rouge">D3</code> : <em>Framing error</em>. Value 1 means that data bit has no valid stop bit. In emuStudio, this never happens.</li> <li><code class="language-plaintext highlighter-rouge">D2</code> : <em>Parity error</em>. Value 1 means that received parity does not agree with selected parity. In emuStudio, this never happens.</li> <li><code class="language-plaintext highlighter-rouge">D1</code> : <em>Transmitter buffer empty</em>. Value 1 means that the data word has been received from the attached device and it’s available for reading (from the Data port).</li> <li><code class="language-plaintext highlighter-rouge">D0</code> : <em>Input device ready</em>. Value 1 means that the CPU can write data to the SIO (that the board is ready). Always 1 in the emulator.</li> </ul> <h3 id="port-2-data-port"> <a href="#port-2-data-port" class="anchor-heading" aria-labelledby="port-2-data-port"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Port 2 (“Data” port) </h3> <p><em>WRITE</em>:</p> <p>Write data to the attached device.</p> <p><em>READ</em>:</p> <p>Read data from the attached device.</p> <p>If the attached device sends asynchronously multiple data, the emulated board stores all in a buffer (queue) with unlimited capacity, so no data should be lost and can be read anytime.</p> <h3 id="program-example"> <a href="#program-example" class="anchor-heading" aria-labelledby="program-example"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Program example </h3> <p>In this section it will be shown a small “How to” program terminal using 88-SIO ports.</p> <h4 id="print-a-character-on-screen"> <a href="#print-a-character-on-screen" class="anchor-heading" aria-labelledby="print-a-character-on-screen"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Print a character on screen </h4> <p>In emuStudio, it is enough to write data to Port 2, e.g.:</p> <div class="language-plaintext code-example highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mvi a, 'H'
out 11h
mvi a, 'i'
out 11h
</code></pre></div></div> <h4 id="print-a-string-on-screen"> <a href="#print-a-string-on-screen" class="anchor-heading" aria-labelledby="print-a-string-on-screen"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Print a string on screen </h4> <p>For writing strings, it is more practical to have a procedure.</p> <div class="language-plaintext code-example highlighter-rouge"><div class="highlight"><pre class="highlight"><code>lxi h, text  ; load address of 'text' label to HL
call print   ; print text
hlt          ; halt CPU

text: db 'Hello, world!',0

; Procedure for printing text to terminal.
; Input: pair HL must contain the address of the ASCIIZ string
print:
    mov a, m  ; load character from HL
    inx h     ; increment HL
    cpi 0     ; is the character = 0?
    rz        ; yes; quit
    out 11h   ; otherwise; show it
    jmp print ; and repeat from the beginning
</code></pre></div></div> <h4 id="reading-character-from-keyboard"> <a href="#reading-character-from-keyboard" class="anchor-heading" aria-labelledby="reading-character-from-keyboard"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Reading character from keyboard </h4> <p>For reading a character, it is required to read the Port 1 until the character is not ready. Then we can read it from Port 2.</p> <div class="language-plaintext code-example highlighter-rouge"><div class="highlight"><pre class="highlight"><code>; Procedure will read a single character from terminal
; Input: none
; Output: register A will contain the character.
getchar:
    in 10h     ; read Port 1
    ani 1      ; is data ready ?
    jz getchar ; not; try again
    in 11h     ; yes; read it (into A register)
    ret
</code></pre></div></div> <h4 id="reading-text-from-keyboard"> <a href="#reading-text-from-keyboard" class="anchor-heading" aria-labelledby="reading-text-from-keyboard"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Reading text from keyboard </h4> <p>Now follows an example, which will read a whole line of characters into memory starting at address in <code class="language-plaintext highlighter-rouge">DE</code> pair. The procedure will interpret some control keys, like: backspace and ENTER keys.</p> <div class="language-plaintext code-example highlighter-rouge"><div class="highlight"><pre class="highlight"><code>lxi h, text        ; load address of 'text' label to HL
xchg               ; DE &lt;-&gt; HL
call getline       ; read line from the keyboard into DE

lxi h, text        ; load 'text' address again
call print         ; print the text on screen

hlt                ; halt CPU

text: ds 30        ; here will be stored the read text

;Procedure for reading a text from keyboard.
;Input: DE = address, where the text should be put after reading
;       C  = is used internally
getline:
    mvi c, 0       ; register C will be used as a counter of
                   ; read characters
next_char:
    in 10h         ; read Port 1: status
    ani 1          ; is the char ready for reading?
    jz next_char   ; not; try again
    in 11h         ; yes; read it to A register

    ; now ENTER and Backspace will be interpreted
    cpi 13         ; ENTER?
    jz getline_ret ; yes; it means end of input
    cpi 8          ; Backspace ?
    jnz save_char  ; if not; store the character

    ; Backspace interpretation
    mov a, c       ; A &lt;- number of read characters
    cpi 0          ; are we at the beginning?
    jz next_char   ; yes; ignore the backspace

    dcx d          ; not; decrement DE
    dcr c          ; decrement count of read characters
    mvi a,8        ; "show" the backspace (terminal will
                   ; interpret this by moving the cursor
                   ; to the left by 1 char)
    out 11h
    mvi a, 32      ; "clear" the current character on screen
                   ; by a space character (ASCII code 32)
    out 11h

    mvi a,8        ; and move the cursor back again
    out 11h
    jmp next_char  ; jump to next char

save_char:         ; stores a character into memory at DE
    out 11h        ; show the character in A register
    stax d         ; store it at address DE
    inx d          ; increment DE
    inr c          ; increment number of read characters
    jmp next_char  ; jump to next char

getline_ret:       ; end of input
                   ; ENTER will be stored as CRLF
    mvi a,13       ; CR (Carriage Return)
    stax d         ; store the char
    inx d          ; increment DE
    mvi a, 10      ; LF (Line Feed)
    stax d         ; store the char
    inx d          ; increment DE
    mvi a, 0       ; char 0 (End-Of-Input)
    stax d         ; store the char
    ret            ; return
</code></pre></div></div> <h4 id="get-notified-when-a-key-is-pressed"> <a href="#get-notified-when-a-key-is-pressed" class="anchor-heading" aria-labelledby="get-notified-when-a-key-is-pressed"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Get notified when a key is pressed </h4> <p>In this example, an interrupt is signalled when user presses a key on keyboard.</p> <div class="language-plaintext code-example highlighter-rouge"><div class="highlight"><pre class="highlight"><code>; Tests signalling interrupts on input
mvi a, 1      ; 88-SIO: input interrupts enable
out 0x10

ei            ; enable CPU interrupts
loop:
jmp loop      ; do this forever (or until...)

; interrupt handler
org 0x38      ; assuming interrupt vector is set to 7
in 0x11       ; read char from 88-SIO (and ignore it)
lxi h, key    ; load address of 'key' label to HL
call print    ; print "key pressed"
ret           ; return from the interrupt

key: db 'Key pressed!',10,13,0

; Procedure for printing text to terminal.
; Input: pair HL must contain the address of the ASCIIZ string
print:
    mov a, m  ; load character from HL
    inx h     ; increment HL
    cpi 0     ; is the character = 0?
    rz        ; yes; quit
    out 11h   ; otherwise; show it
    jmp print ; and repeat from the beginning
</code></pre></div></div> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
